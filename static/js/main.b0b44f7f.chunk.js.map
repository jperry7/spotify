{"version":3,"sources":["middleware/HashtagSearchMiddleware.js","middleware/VideoSearchMiddleware.js","middleware/RefreshPlaybackMiddleware.js","reducers/HashtagReducer.js","reducers/PlaybackReducer.js","reducers/index.js","reducers/LogReducer.js","components/VideoPlayer/index.js","components/UserHashtag/index.js","components/HashtagBar/index.js","components/VideoInfoBar/index.js","actions/index.js","components/Timelapse/index.js","components/SpotifyLogin/index.js","components/SpotifyCallback/index.js","serviceWorker.js","index.js"],"names":["HashtagSearchMiddleware","store","next","action","type","hashtag","payload","replace","maxID","url","concat","Axios","get","then","response","status","hashtagData","data","graphql","dispatch","catch","err","VideoSearchMiddleware","shortcode","shortcode_media","RefreshPlaybackMiddleware","Spotify","clientId","accessToken","getMyCurrentPlaybackState","body","getAudioFeaturesForTrack","track","console","log","DEFAULT_QUEUE_VIDEO","video_url","location","name","DEFAULT_HASHTAGS","active","Set","inactive","Map","playing","queued","played","updateQueue","state","videos","Object","toConsumableArray","filter","video","length","has","every","hashtags","size","DEFAULT_PLAYBACK_STATE","token","is_playing","progress_ms","item","duration_ms","tracks","combineReducers","arguments","undefined","newState","copyHashtagState","newHashtag","add","delete","set","newVideos","edge_hashtag_to_media","edges","map","edge","node","captions","edge_media_to_caption","text","_","flatten","caption","regex","matches","match","exec","push","getHashtagsFromCaption","addCaptionsAndHashtags","is_video","newQueued","sort","a","b","taken_at_timestamp","videoData","owner","playback","copyPlaybackState","id","VideoPlayer","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onEnded","bind","assertThisInitialized","e","target","currentTime","play","react_default","createElement","className","src","autoPlay","muted","playsInline","Component","library","faPlusCircle","UserHashtag","DEFAULT_WIDTH","value","width","onChange","onClick","onKeyPress","div","document","classList","innerText","getElementsByClassName","appendChild","Math","max","offsetWidth","removeChild","chars","nums","x","i","includes","toLowerCase","join","event","setState","sanitizeHashtag","getWidth","hashtagAdded","key","react_fontawesome_index_es","icon","renderSubmitButton","placeholder","style","HashtagBar","textContent","slice","hashtagToggled","_this2","renderHashtag","renderHashtags","UserHashtag_UserHashtag","VideoInfoBar","hashtagClicked","videoSkipped","ownerClicked","username","window","open","timestamp","dist_default","unix","fromNow","Link","to","album","artists","progress","round","tempo","danceability","renderSpotifyArtistName","renderSpotifyAlbumName","renderSpotifyTrackName","renderSpotifyTrackProgress","renderSpotifyTempo","renderSpotifyLoginLink","renderOwner","renderLocation","renderTime","renderSkip","renderSpotify","href","renderVideoInfo","HASHTAG_SEARCH_THROTTLE_TIME","VIDEO_SEARCH_THROTTLE_TIME","REFRESH_PLAYBACK_THROTTLE_TIME","GET_SPOTIFY_TRACK_THROTTLE_TIME","videoEnded","_ref","queue","hashtagUser","hashtagSearched","meta","throttle","videoSearched","setSpotifyToken","refreshPlayback","getSpotifyTrack","Timelapse","isBeat","tick","getTempo","beating","searchVideos","searchHashtags","Date","now","videoPlayer","getElementById","playbackRate","requestAnimationFrame","beatTime","randomVideo","sample","page_info","has_next_page","end_cursor","VideoPlayer_VideoPlayer","HashtagBar_HashtagBar","VideoInfoBar_VideoInfoBar","connect","bindActionCreators","SpotifyLogin","SPOTIFY_CLIENT_ID","SPOTIFY_SCOPES","SPOTIFY_REDIRECT_URI","SPOTIFY_SHOW_DIALOGUE","authorizeURL","SpotifyCallback","done","hashData","hash","Redirect","pathname","from","Boolean","hostname","routing","BrowserRouter","basename","Route","path","component","provider","es","applyMiddleware","ReduxThrottle","leading","trailing","HashtagSearch","VideoSearch","RefreshPlayback","ReduxPromise","createStore","Reducers","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b0b44f7f.chunk.js","sourcesContent":["import Axios from 'axios';\n\nconst HashtagSearchMiddleware = store => next => action => {\n\tswitch(action.type) {\n\t\tcase 'HASHTAG_SEARCHED': {\n\t\t\tconst hashtag = action.payload.hashtag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#','');\n\n\t\t\tconst maxID = action.payload.maxID;\n\n\t\t\tlet url = `https://www.instagram.com/explore/tags/${hashtag}/?__a=1`;\n\n\t\t\tif(maxID) {\n\t\t\t\turl = `${url}&max_id=${maxID}`;\n\t\t\t}\n\n\t\t\tAxios.get(url)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tresponse => {\n\t\t\t\t\t\t\t\tif(response.status === 200) {\n\t\t\t\t\t\t\t\t\tconst hashtagData = response.data\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.graphql\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.hashtag;\n\t\t\t\t\t\t\t\t\tstore.dispatch({\n\t\t\t\t\t\t\t\t\t\t\ttype: 'HASHTAG_SEARCH_RETURNED',\n\t\t\t\t\t\t\t\t\t\t\tpayload: hashtagData,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.catch(err => store.dispatch({\n\t\t\t\t\t\t\t\t\ttype: 'HASHTAG_SEARCH_ERRORED',\n\t\t\t\t\t\t\t\t\tpayload: err,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t}\n\t\tbreak;\n\n\t\tdefault: return next(action);\n\t}\n}\n\nexport default HashtagSearchMiddleware;\n","import Axios from 'axios';\n\nconst VideoSearchMiddleware = store => next => action => {\n\tswitch(action.type) {\n\t\tcase 'VIDEO_SEARCHED': {\n\t\t\tconst url = `https://www.instagram.com/p/${action.payload.shortcode}/?__a=1`;\n\n\t\t\tAxios.get(url)\n\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\tresponse => {\n\t\t\t\t\t\t\t\tif(response.status === 200) {\n\t\t\t\t\t\t\t\t\taction.type = 'VIDEO_SEARCH_RETURNED';\n\t\t\t\t\t\t\t\t\taction.payload = response.data.graphql.shortcode_media;\n\t\t\t\t\t\t\t\t\tstore.dispatch(action);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.catch(err => store.dispatch({\n\t\t\t\t\t\t\t\t\ttype: 'VIDEO_SEARCH_ERRORED',\n\t\t\t\t\t\t\t\t\tpayload: err,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t}\n\t\tbreak;\n\n\t\tdefault: return next(action);\n\t}\n}\n\nexport default VideoSearchMiddleware;\n","import Spotify from 'spotify-web-api-node';\n\nconst RefreshPlaybackMiddleware = store => next => action => {\n\tconst SPOTIFY_CLIENT_ID = '7c5c8668957b4b629aa5fc99e70bb4ea';\n\tswitch(action.type) {\n\t\tcase 'REFRESH_PLAYBACK': {\n\t\t\tlet spotifyApi = new Spotify({\n\t\t\t\tclientId: SPOTIFY_CLIENT_ID,\n\t\t\t\taccessToken: action.payload.accessToken,\n\t\t\t});\n\n\t\t\tspotifyApi.getMyCurrentPlaybackState({})\n\t\t\t  .then(data => {\n\t\t\t\t\tstore.dispatch({\n\t\t\t\t\t\ttype: 'REFRESH_PLAYBACK_RETURNED',\n\t\t\t\t\t\tpayload: data.body,\n\t\t\t\t\t});\n\t\t\t  });\n\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'GET_SPOTIFY_TRACK': {\n\t\t\tlet spotifyApi = new Spotify({\n\t\t\t\tclientId: SPOTIFY_CLIENT_ID,\n\t\t\t\taccessToken: action.payload.accessToken,\n\t\t\t});\n\n\t\t\tspotifyApi.getAudioFeaturesForTrack(action.payload.track)\n\t\t\t\t.then(data => {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tstore.dispatch({\n\t\t\t\t\t\ttype: 'GET_SPOTIFY_TRACK_RETURNED',\n\t\t\t\t\t\tpayload: data.body,\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault: return next(action);\n\t}\n}\n\nexport default RefreshPlaybackMiddleware;\n","import _ from 'lodash';\n\nconst DEFAULT_QUEUE_VIDEO = {\n\tvideo_url: 'https://zippy.gfycat.com/PeskyArtisticAxolotl.webm',\n\tlocation: {\n\t\tname: 'Searching Instagram for videos matching hashtags...'\n\t}\n};\n\nconst DEFAULT_HASHTAGS = {\n\tactive: new Set(['timelapse']),\n\tinactive: new Set(),\n\thashtagData: new Map(),\n\tplaying: DEFAULT_QUEUE_VIDEO,\n\tqueued: \tnew Set(),\n\tplayed: \tnew Set(),\n};\n\nconst copyHashtagState = (state) => {\n\treturn {\n\t\tactive: new Set([...state.active]),\n\t\tinactive: new Set([...state.inactive]),\n\t\thashtagData: new Map(state.hashtagData),\n\t\tplaying: state.playing,\n\t\tqueued: \tnew Set([...state.queued]),\n\t\tplayed: \tnew Set([...state.played]),\n\t};\n};\n\nconst getHashtagsFromCaption = (caption) => {\n    const regex = /(?:^|\\s)(?:#)([a-zA-Z\\d]+)/gm;\n    let matches = [];\n    let match = regex.exec(caption);\n\t\twhile(match) {\n\t\t\tmatches.push(match[1]);\n\t\t\tmatch = regex.exec(caption);\n\t\t}\n\n    return matches;\n}\n\nconst addCaptionsAndHashtags = (edge) => {\n\tedge.captions = edge.edge_media_to_caption\n\t\t\t\t\t\t\t\t\t\t\t .edges\n\t\t\t\t\t\t\t\t\t\t\t .map(edge => edge.node.text)\n\tedge.hashtags = new Set(_.flatten(edge.captions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(caption => getHashtagsFromCaption(caption)))\n\t);\n\treturn edge;\n}\n\nconst updateQueue = (state) => {\n\tconst videos = [...state.queued]\n\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\tvideo => video.video_url && video.video_url.length\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\tvideo => !state.played.has(video.video_url)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t\tvideo => [...state.active].every(\n\t\t\t\t\t\t\t\t\t\t\t\t\thashtag => video.hashtags.has(hashtag)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\n\tif(state.active.size && videos.length) {\n\t\tstate.playing = videos[0];\n\t}\n\telse {\n\t\tstate.playing = DEFAULT_QUEUE_VIDEO;\n\t}\n\n\treturn state;\n}\n\nexport default function(state=DEFAULT_HASHTAGS, action) {\n\tlet newState = copyHashtagState(state);\n\n\tconsole.log('QUEUED VIDEOS:', newState.queued.size)\n\n\tswitch(action.type) {\n\t\t\tcase 'HASHTAG_ADDED': {\n\t\t\t\tconst newHashtag = action.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#','');\n\t\t\t\tnewState.active = new Set([...newState.active, newHashtag]);\n\n\t\t\t\tnewState = updateQueue(newState);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'HASHTAG_TOGGLED': {\n\t\t\t\tif(newState.active.has(action.payload)) {\n\t\t\t\t\tnewState.inactive.add(action.payload);\n\t\t\t\t\tnewState.active.delete(action.payload);\n\t\t\t\t} else {\n\t\t\t\t\tnewState.active.add(action.payload);\n\t\t\t\t\tnewState.inactive.delete(action.payload);\n\t\t\t\t}\n\n\t\t\t\tnewState = updateQueue(newState);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'HASHTAG_SEARCH_RETURNED': {\n\t\t\t\tnewState.hashtagData.set(action.payload.name, action.payload);\n\n\t\t\t\tconst newVideos = action.payload\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.edge_hashtag_to_media\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.edges\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(edge => edge.node)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(edge => addCaptionsAndHashtags(edge))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter(edge => edge.is_video);\n\t\t\t\tlet newQueued = [...newState.queued, ...newVideos];\n\t\t\t\tnewQueued.sort((a,b) => b.taken_at_timestamp - a.taken_at_timestamp);\n\t\t\t\tnewState.queued = new Set(newQueued);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'VIDEO_SKIPPED':\n\t\t\tcase 'VIDEO_ENDED': {\n\t\t\t\tnewState.played = new Set([...newState.played, newState.playing.video_url]);\n\t\t\t\tnewState = updateQueue(newState);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'VIDEO_SEARCH_RETURNED': {\n\t\t\t\tconst videoData = action.payload;\n\n\t\t\t\tlet queued = [...newState.queued];\n\t\t\t\tqueued = queued.map(video => {\n\t\t\t\t\tif(video.shortcode === videoData.shortcode) {\n\t\t\t\t\t\tvideo.video_url = videoData.video_url;\n\t\t\t\t\t\tvideo.owner = videoData.owner;\n\t\t\t\t\t\tvideo.location = videoData.location;\n\t\t\t\t\t}\n\t\t\t\t\treturn video;\n\t\t\t\t});\n\n\t\t\t\tnewState.queued = new Set([...queued]);\n\n\t\t\t\tif(newState.playing.video_url === DEFAULT_QUEUE_VIDEO.video_url) {\n\t\t\t\t\tnewState = updateQueue(newState);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: break;\n\t}\n\n\treturn newState;\n}\n","const DEFAULT_PLAYBACK_STATE = {\n\ttoken: {},\n\tplaying: {\n\t\tis_playing: false,\n\t\tprogress_ms: 1,\n\t\titem: {\n\t\t\tname: '',\n\t\t\tduration_ms: 1,\n\t\t},\n\t},\n\ttracks: new Map(),\n};\n\nconst copyPlaybackState = (state) => {\n\treturn {\n\t\ttoken: state.token,\n\t\tplaying: state.playing,\n\t\ttracks: new Map(state.tracks),\n\t};\n}\n\nexport default function(state=DEFAULT_PLAYBACK_STATE, action) {\n\tlet newState = copyPlaybackState(state);\n\n\tswitch(action.type) {\n\t\tcase 'SET_SPOTIFY_TOKEN': {\n\t\t\tnewState.token = action.payload;\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'REFRESH_PLAYBACK_RETURNED': {\n\t\t\tnewState.playing = action.payload;\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'GET_SPOTIFY_TRACK_RETURNED': {\n\t\t\tconsole.log('set',action.payload);\n\t\t\tnewState.tracks.set(action.payload.id, action.payload);\n\t\t\tbreak;\n\t\t}\n\n\t\tdefault: break;\n\t}\n\n\treturn newState;\n}\n","import { combineReducers } from 'redux';\nimport HashtagReducer from './HashtagReducer';\nimport PlaybackReducer from './PlaybackReducer';\nimport LogReducer from './LogReducer';\n\nexport default combineReducers({\n\thashtags: HashtagReducer,\n\tplayback: PlaybackReducer,\n\tlog: LogReducer,\n});\n","export default function(state=null, action) {\n\tconsole.log(\"ACTION\", action);\n\treturn state;\n}\n","import React, { Component } from 'react';\nimport './index.css';\n\nexport default class VideoPlayer extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onEnded = this.onEnded.bind(this);\n\t}\n\n\tonEnded(e) {\n\t\te.target.currentTime = 0;\n\t\te.target.play();\n\t\tthis.props.onEnded(this.props);\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<video\n\t\t\t\tid='VideoPlayer'\n\t\t\t\tclassName=\"VideoPlayer\"\n\t\t\t\tsrc={this.props.hashtags.playing.video_url}\n\t\t\t\tonEnded={this.onEnded}\n\t\t\t\tautoPlay={true}\n\t\t\t\tmuted={true}\n\t\t\t\tplaysInline={true}\n\t\t\t/>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './index.css';\n\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlusCircle } from '@fortawesome/free-solid-svg-icons'\nlibrary.add(faPlusCircle)\n\nexport default class UserHashtag extends Component {\n\n\tDEFAULT_WIDTH = \"200px\";\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tvalue: '',\n\t\t\twidth: this.DEFAULT_WIDTH,\n\t\t};\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onKeyPress = this.onKeyPress.bind(this);\n\t}\n\n\tgetWidth(value) {\n\t\tconst div = document.createElement(\"div\");\n\t\tdiv.classList.add('hashtag');\n\t\tdiv.innerText = value;\n\n\t\tdocument.getElementsByClassName('UserHashtag')[0].appendChild(div);\n\t\tconst width = Math.max((div.offsetWidth + 20), this.DEFAULT_WIDTH) + \"px\";\n\t\tdocument.getElementsByClassName('UserHashtag')[0].removeChild(div);\n\n\t\treturn width;\n\t}\n\n\tsanitizeHashtag(value) {\n\t\tconst chars = ['a','b','c','d','e','f','g','h','i','j','k','l','m',\n\t\t\t\t\t\t\t\t\t 'n','o','p','q','r','s','t','u','v','w','x','y','z'];\n\t\tconst nums = \t['0','1','2','3','4','5','6','7','8','9','0'];\n\n\t\tif(value.length === 1 && value[0] === '#') {\n\t\t\treturn value;\n\t\t}\n\n\t\tvalue = [...value].filter((x,i) => {\n\t\t\tif(chars.includes(x.toLowerCase())) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif(nums.includes(x) && i > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}).join('');\n\n\t\tif(value.length>0) {\n\t\t\tvalue = '#' + value;\n\t\t}\n\n\t\treturn(value);\n\t}\n\n\tonChange(event) {\n\t\tthis.setState({\n\t\t\tvalue: this.sanitizeHashtag(event.target.value),\n\t\t\twidth: this.getWidth(event.target.value),\n\t\t});\n\t}\n\n\tonClick() {\n\t\tthis.hashtagAdded();\n\t}\n\n\tonKeyPress(event) {\n\t\tif(event.key === 'Enter') {\n\t\t\tthis.hashtagAdded();\n\t\t}\n\t}\n\n\thashtagAdded() {\n\t\tthis.props.hashtagAdded(this.state.value);\n\t\tthis.setState({\n\t\t\tvalue: '',\n\t\t\twidth: this.DEFAULT_WIDTH\n\t\t});\n\t}\n\n\trenderSubmitButton() {\n\t\tif(this.state.value.length > 0) {\n\t\t\treturn <FontAwesomeIcon\n\t\t\t\t\t\t\t\ticon={['fa', 'plus-circle']}\n\t\t\t\t\t\t\t\tclassName=\"UserHashtagSubmitButton\"\n\t\t\t\t\t\t\t\tonClick={this.onClick}\n\t\t\t/>;\n\t\t} else {\n\t\t\treturn <span></span>\n\t\t}\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div className='UserHashtag'>\n\t\t\t\t{this.renderSubmitButton()}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tclassName=\"UserHashtagInput\"\n\t\t\t\t\tplaceholder=\"#hashtag\"\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tonKeyPress={this.onKeyPress}\n\t\t\t\t\tstyle={{width: this.state.width}}\n\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import React, { Component } from 'react';\nimport './index.css';\n\nimport UserHashtag from '../UserHashtag';\n\nexport default class HashtagBar extends Component {\n\t\tconstructor(props) {\n\t\t\tsuper(props);\n\t\t\tthis.onClick = this.onClick.bind(this);\n\t\t}\n\n\t\tonClick(e) {\n\t\t\tconst hashtag = e.target\n\t\t\t\t\t\t\t\t\t\t\t\t.textContent\n\t\t\t\t\t\t\t\t\t\t\t\t.slice(1);\n\t\t\tthis.props.hashtagToggled(hashtag);\n\t\t}\n\n\t\trenderHashtags() {\n\t\t\tconst hashtags = [...this.props.hashtags.active, ...this.props.hashtags.inactive].sort();\n\t\t\treturn hashtags.map(\n\t\t\t\t\t\t\t\thashtag => this.renderHashtag(hashtag, this.props.hashtags.active.has(hashtag))\n\t\t\t);\n\t\t}\n\n\t\trenderHashtag(hashtag, active) {\n\t\t\tconst className = (active) ? 'Hashtag HashtagActive' : 'Hashtag HashtagInactive';\n\t\t\treturn(\n\t\t\t\t<span\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tkey={hashtag}\n\t\t\t\t\tonClick={this.onClick}\n\t\t\t\t>\n\t\t\t\t\t#{hashtag}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\trender() {\n\t\t\treturn(\n\t\t\t\t<div className='HashtagBar'>\n\t\t\t\t\t{this.renderHashtags()}\n\t\t\t\t\t<UserHashtag\n\t\t\t\t\t\thashtagAdded={this.props.hashtagAdded}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n}\n","import React, { Component } from 'react';\nimport { Link } from \"react-router-dom\";\nimport Moment from 'react-moment';\nimport 'moment-timezone';\nimport './index.css';\n\nexport default class VideoInfoBar extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.hashtagClicked = this.hashtagClicked.bind(this);\n\t\tthis.videoSkipped = this.videoSkipped.bind(this);\n\t\tthis.ownerClicked = this.ownerClicked.bind(this);\n\t}\n\n\thashtagClicked(e) {\n\t\tconst hashtag = e.target\n\t\t\t\t\t\t\t\t\t\t\t.textContent\n\t\t\t\t\t\t\t\t\t\t\t.slice(1);\n\t\tif(this.props.hashtags.active.has(hashtag) || this.props.hashtags.inactive.has(hashtag)) {\n\t\t\tthis.props.hashtagToggled(hashtag);\n\t\t} else {\n\t\t\tthis.props.hashtagAdded(hashtag);\n\t\t}\n\t}\n\n\tvideoSkipped() {\n\t\tthis.props.videoSkipped();\n\t}\n\n\trenderHashtags(hashtags) {\n\t\tif(!hashtags) return <span></span>;\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t{[...hashtags]\n\t\t\t\t\t.sort()\n\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\thashtag => <span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'hashtag-' + hashtag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(this.props.hashtags.active.has(hashtag)) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'VideoInfoHashtag VideoInfoHashtagActive' :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'VideoInfoHashtag VideoInfoHashtagInactive'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.hashtagClicked}\n\t\t\t\t\t\t\t\t\t\t\t\t\t >\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t#{hashtag}\n\t\t\t\t\t\t\t\t\t\t\t\t\t </span>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\townerClicked(e) {\n\t\tconst url = `https://www.instagram.com/${this.props.hashtags.playing.owner.username}/`;\n\t\twindow.open(url,'_blank');\n\t}\n\n\trenderOwner(owner) {\n\t\tif(!owner) return <div></div>;\n\n\t\treturn <div\n\t\t\t\t\t\tonClick={this.ownerClicked}\n\t\t\t\t\t\tclassName='VideoInfoOwner'\n\t\t\t\t\t >\n\t\t\t\t\t\t\t@{owner.username}\n\t\t\t\t\t </div>;\n\t}\n\n\trenderLocation(location) {\n\t\tif(!location || !location.name || !location.name.length) {\n\t\t\treturn <span className='VideoInfoLocation'>Unknown Location</span>;\n\t\t}\n\n\t\treturn <span className='VideoInfoLocation'>{location.name}</span>;\n\t}\n\n\trenderTime(timestamp) {\n\t\tif(!timestamp) return <span></span>;\n\n\t\treturn(\n\t\t\t\t\t\t<span className='VideoInfoTime'>\n\t\t\t\t\t\t\t<Moment unix fromNow>\n\t\t\t\t\t\t\t\t{timestamp}\n\t\t\t\t\t\t\t</Moment>\n\t\t\t\t\t\t</span>\n\t\t);\n\t}\n\n\trenderSpotifyLoginLink() {\n\t\treturn <div>\n\t\t\t\t\t\t<Link to='/login'>\n\t\t\t\t\t\t\t<button>\n\t\t\t\t\t\t\t\tConnect to Spotify\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>;\n\t}\n\n\trenderSpotifyTrackName() {\n\t\tif(!this.props.playback.playing.item || !this.props.playback.playing.item.name) {\n\t\t\treturn <span></span>;\n\t\t}\n\n\t\treturn <span>\n\t\t\t{this.props.playback.playing.item.name}\n\t\t</span>\n\t}\n\n\trenderSpotifyAlbumName() {\n\t\tif(!this.props.playback.playing.item || !this.props.playback.playing.item.album || !this.props.playback.playing.item.album.name) {\n\t\t\treturn <span></span>;\n\t\t}\n\n\t\treturn <span>\n\t\t\t{this.props.playback.playing.item.album.name}\n\t\t</span>\n\t}\n\n\trenderSpotifyArtistName() {\n\t\tif(!this.props.playback.playing.item || !this.props.playback.playing.item.artists || !this.props.playback.playing.item.artists[0] || !this.props.playback.playing.item.artists[0]) {\n\t\t\treturn <span></span>;\n\t\t}\n\n\t\treturn <span>\n\t\t\t{this.props.playback.playing.item.artists[0].name}\n\t\t</span>\n\t}\n\n\trenderSpotifyTrackProgress() {\n\t\tif(!this.props.playback.playing || !this.props.playback.playing.item) {\n\t\t\treturn <span></span>;\n\t\t}\n\n\t\tconst { progress_ms }  \t= this.props.playback.playing;\n\t\tconst { duration_ms } \t= this.props.playback.playing.item;\n\t\tconst progress = Math.round(progress_ms / duration_ms * 100);\n\t\treturn <span>\n\t\t\t({progress}%)\n\t\t</span>\n\t}\n\n\trenderSpotifyTempo() {\n\t\tif(!this.props.playback.playing || !this.props.playback.playing.item || !this.props.playback.playing.item.id) {\n\t\t\treturn <span></span>\n\t\t}\n\n\t\tconst {id} = this.props.playback.playing.item;\n\n\t\tif(!this.props.playback.tracks.has(id)) {\n\t\t\treturn <span></span>\n\t\t}\n\n\t\tconst track = this.props.playback.tracks.get(id);\n\n\t\tif(track.tempo) {\n\t\t\treturn <span>{Math.round(track.tempo)} beats/min, {Math.round(track.danceability * 100)}% danceability</span>\n\t\t}\n\t}\n\n\trenderSpotify() {\n\t\tif(!this.props.playback.token || !this.props.playback.token.length) {\n\t\t\treturn this.renderSpotifyLoginLink();\n\t\t}\n\t\telse {\n\t\t\tif(this.props.playback.playing && this.props.playback.playing.is_playing) {\n\t\t\t\treturn <div>\n\t\t\t\t\t\t\t\t\t<div className='SpotifyAlbum'>{this.renderSpotifyArtistName()} - {this.renderSpotifyAlbumName()} - {this.renderSpotifyTrackName()} {this.renderSpotifyTrackProgress()}</div>\n\t\t\t\t\t\t\t\t\t<div className='SpotifyTempo'>{this.renderSpotifyTempo()}</div>\n\t\t\t\t\t\t\t </div>;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn <div className='SpotifyTrackName'>No song is currently playing.</div>;\n\t\t\t}\n\t\t}\n\t}\n\n\trenderSkip() {\n\t\tif(!this.props.hashtags.playing.owner) {\n\t\t\treturn <span></span>;\n\t\t}\n\n\t\treturn <div className='Skip'>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={this.videoSkipped}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSkip Video\n\t\t\t\t\t\t\t</button>\n\t\t</div>;\n\t}\n\n\trenderVideoInfo() {\n\t\tconst { playing } = this.props.hashtags;\n\n\t\tif(!playing) {\n\t\t\treturn <div></div>;\n\t\t}\n\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t{this.renderOwner(playing.owner)}\n\t\t\t\t{this.renderLocation(playing.location)} {this.renderTime(playing.taken_at_timestamp)}\n\t\t\t\t{this.renderHashtags(playing.hashtags)}\n\t\t\t\t{this.renderSkip()}\n\t\t\t\t<hr />\n\t\t\t\t{this.renderSpotify()}\n\t\t\t\t<br />\n\t\t\t\t<div className='Author'>\n\t\t\t\t\t<a href='https://perry.sh'>APP BY JOSHUA PERRY</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div className='VideoInfoBar'>\n\t\t\t\t{this.renderVideoInfo()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n","const HASHTAG_SEARCH_THROTTLE_TIME = 5000;\nconst VIDEO_SEARCH_THROTTLE_TIME = 2000;\nconst REFRESH_PLAYBACK_THROTTLE_TIME = 1000;\nconst GET_SPOTIFY_TRACK_THROTTLE_TIME = 1000;\n\nexport function videoEnded({ hashtags, queue }) {\n\treturn {\n\t\ttype: 'VIDEO_ENDED',\n\t\tpayload: { hashtags, queue },\n\t};\n}\n\nexport function videoSkipped() {\n\treturn {\n\t\ttype: 'VIDEO_SKIPPED'\n\t};\n}\n\nexport function hashtagAdded(hashtag) {\n\treturn {\n\t\ttype: 'HASHTAG_ADDED',\n\t\tpayload: hashtag,\n\t};\n}\n\nexport function hashtagToggled(hashtag) {\n\treturn {\n\t\ttype: 'HASHTAG_TOGGLED',\n\t\tpayload: hashtag,\n\t};\n}\n\nexport function hashtagUser(hashtag) {\n\treturn {\n\t\ttype: 'HASHTAG_USER',\n\t\tpayload: hashtag,\n\t};\n}\n\nexport function hashtagSearched(hashtag, maxID=null) {\n\treturn {\n\t\ttype: 'HASHTAG_SEARCHED',\n\t\tpayload: { hashtag, maxID },\n\t\tmeta: {\n\t\t\tthrottle: HASHTAG_SEARCH_THROTTLE_TIME\n\t\t},\n\t};\n}\n\nexport function videoSearched(shortcode) {\n\treturn {\n\t\ttype: 'VIDEO_SEARCHED',\n\t\tpayload: {\n\t\t\tshortcode\n\t\t},\n\t\tmeta: {\n\t\t\tthrottle: VIDEO_SEARCH_THROTTLE_TIME\n\t\t},\n\t};\n}\n\nexport function setSpotifyToken(token) {\n\treturn {\n\t\ttype: 'SET_SPOTIFY_TOKEN',\n\t\tpayload: token,\n\t}\n}\n\nexport function refreshPlayback(accessToken) {\n\treturn {\n\t\ttype: 'REFRESH_PLAYBACK',\n\t\tpayload: {\n\t\t\taccessToken: accessToken\n\t\t},\n\t\tmeta: {\n\t\t\tthrottle: REFRESH_PLAYBACK_THROTTLE_TIME\n\t\t}\n\t}\n}\n\nexport function getSpotifyTrack(accessToken, track) {\n\treturn {\n\t\ttype: 'GET_SPOTIFY_TRACK',\n\t\tpayload: {\n\t\t\taccessToken: accessToken,\n\t\t\ttrack: track,\n\t\t},\n\t\tmeta: {\n\t\t\tthrottle: GET_SPOTIFY_TRACK_THROTTLE_TIME\n\t\t}\n\t}\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport './index.css';\nimport VideoPlayer from '../VideoPlayer';\nimport HashtagBar from '../HashtagBar';\nimport VideoInfoBar from '../VideoInfoBar';\n\nimport {\n\tvideoEnded,\n\tvideoSkipped,\n\thashtagAdded,\n\thashtagToggled,\n\thashtagUser,\n\thashtagSearched,\n\tvideoSearched,\n\trefreshPlayback,\n\tgetSpotifyTrack,\n} from '../../actions';\n\nclass Timelapse extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.isBeat = this.isBeat.bind(this);\n\t\tthis.tick = this.tick.bind(this);\n\t\tthis.getTempo = this.getTempo.bind(this);\n\t\tthis.state = { beating: false };\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.hashtagSearched('timelapse');\n\t\tthis.tick();\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.searchVideos();\n\t\tthis.searchHashtags();\n\t\tthis.refreshPlayback();\n\t\tthis.getSpotifyTrack();\n\t}\n\n\ttick() {\n\t\tconst currentTime = Date.now();\n\t\tconst tempo = this.getTempo();\n\t\tconst videoPlayer = document.getElementById('VideoPlayer');\n\t\tconst beating = (currentTime % tempo) > (tempo / 2);\n\n\t\tif(beating != this.state.beating) {\n\t\t\tif(beating) {\n\t\t\t\tconsole.log('beat');\n\t\t\t\tvideoPlayer.playbackRate = 1.0;\n\t\t\t\tthis.setState({ beating: true });\n\t\t\t} else {\n\t\t\t\tvideoPlayer.playbackRate = 0.0;\n\t\t\t\tthis.setState({ beating: false });\n\t\t\t}\n\t\t}\n\n\t\trequestAnimationFrame(this.tick);\n\t}\n\n\tgetTempo() {\n\t\tconst {playing} = this.props.playback;\n\t\tif(playing) {\n\t\t\tconst {item, progress_ms} = playing;\n\t\t\tif(item && progress_ms) {\n\t\t\t\tconst {id} = item;\n\t\t\t\tif(id) {\n\t\t\t\t\tif(this.props.playback.tracks.has(id)) {\n\t\t\t\t\t\tconst track = this.props.playback.tracks.get(id);\n\t\t\t\t\t\treturn(1 / track.tempo * 60 * 1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn 1;\n\t}\n\n\tisBeat() {\n\t\tconst {playing} = this.props.playback;\n\t\tif(!playing) return false;\n\t\tconst {item, progress_ms, timestamp} = playing;\n\t\tif(!item || !progress_ms) return false;\n\n\t\tconst {id} = item;\n\t\tif(!id) return false;\n\n\t\tif(!this.props.playback.tracks.has(id)) return false;\n\n\t\tconst track = this.props.playback.tracks.get(id);\n\t\tif(!track) return false;\n\n\t\tconst beatTime = 1 / track.tempo * 60 * 1000;\n\n\t\tif(Date.now() % beatTime < beatTime / 2) return true;\n\n\t\treturn false;\n\t}\n\n\tsearchVideos() {\n\t\tconst videos = [...this.props.hashtags.queued]\n\t\t\t.filter(\n\t\t\t\tvideo => [...this.props.hashtags.active].every(\n\t\t\t\t\thashtag => video.hashtags.has(hashtag)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.filter(video => !video.video_url || !video.video_url.length);\n\n\t\tif(videos.length) {\n\t\t\tconst randomVideo = _.sample(videos);\n\t\t\tthis.props.videoSearched(randomVideo.shortcode);\n\t\t}\n\t}\n\n\tsearchHashtags() {\n\t\tconst hashtags = [...this.props.hashtags.active];\n\n\t\tif(hashtags.length) {\n\t\t\tconst hashtag = _.sample(hashtags);\n\n\t\t\tlet maxID = null;\n\t\t\tif(this.props.hashtags.hashtagData.has(hashtag)) {\n\t\t\t\tconst data = this.props.hashtags.hashtagData.get(hashtag);\n\n\t\t\t\tif(data.edge_hashtag_to_media.page_info.has_next_page) {\n\t\t\t\t\tmaxID = data.edge_hashtag_to_media.page_info.end_cursor;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.props.hashtagSearched(hashtag, maxID);\n\t\t}\n\t}\n\n\trefreshPlayback() {\n\t\tif(this.props.playback.token && this.props.playback.token.length) {\n\t\t\tthis.props.refreshPlayback(this.props.playback.token);\n\t\t}\n\t}\n\n\tgetSpotifyTrack() {\n\t\tif(this.props.playback.token && this.props.playback.token.length) {\n\t\t\tif(this.props.playback.playing && this.props.playback.playing.item) {\n\t\t\t\tif(this.props.playback.playing.item.id) {\n\t\t\t\t\tconst { id } = this.props.playback.playing.item;\n\n\t\t\t\t\tif(!this.props.playback.tracks.has(id)) {\n\t\t\t\t\t\t\tthis.props.getSpotifyTrack(this.props.playback.token, id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<VideoPlayer\n\t\t\t\t\tonEnded={this.props.videoEnded}\n\t\t\t\t\thashtags={this.props.hashtags}\n\t\t\t\t\tplayback={this.props.playback}\n\t\t\t\t\thashtagSearched={this.props.hashtagSearched}\n\t\t\t\t\tvideoSearched={this.props.videoSearched}\n\t\t\t\t/>\n\t\t\t\t<HashtagBar\n\t\t\t\t\thashtags={this.props.hashtags}\n\t\t\t\t\thashtagAdded={this.props.hashtagAdded}\n\t\t\t\t\thashtagToggled={this.props.hashtagToggled}\n\t\t\t\t\thashtagUser={this.props.hashtagUser}\n\t\t\t\t/>\n\t\t\t\t<VideoInfoBar\n\t\t\t\t\thashtags={this.props.hashtags}\n\t\t\t\t\tplayback={this.props.playback}\n\t\t\t\t\thashtagAdded={this.props.hashtagAdded}\n\t\t\t\t\thashtagToggled={this.props.hashtagToggled}\n\t\t\t\t\tvideoSkipped={this.props.videoSkipped}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\thashtags: state.hashtags,\n\t\tplayback: state.playback,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({\n\t\tvideoEnded,\n\t\tvideoSkipped,\n\t\thashtagAdded,\n\t\thashtagToggled,\n\t\thashtagUser,\n\t\thashtagSearched,\n\t\tvideoSearched,\n\t\trefreshPlayback,\n\t\tgetSpotifyTrack,\n\t}, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Timelapse);\n","import React, { Component } from 'react';\n\nclass SpotifyLogin extends Component {\n\n\tSPOTIFY_CLIENT_ID = '7c5c8668957b4b629aa5fc99e70bb4ea';\n\tSPOTIFY_SCOPES = ['user-read-playback-state', 'user-read-currently-playing'];\n\tSPOTIFY_REDIRECT_URI = `https://perry.sh/spotify/callback`;\n\tSPOTIFY_SHOW_DIALOGUE = `false`;\n\n\tcomponentDidMount() {\n\t\tconst authorizeURL = `https://accounts.spotify.com/authorize?client_id=${this.SPOTIFY_CLIENT_ID}&response_type=token&redirect_uri=${this.SPOTIFY_REDIRECT_URI}&scope=${this.SPOTIFY_SCOPES.join(' ')}&show_dialog=${this.SPOTIFY_SHOW_DIALOGUE}`;\n\t\twindow.location.href = authorizeURL;\n\t}\n\n\trender() {\n\t\treturn <div>Redirecting to Spotify Authorization...</div>\n\t}\n}\n\nexport default SpotifyLogin;\n","import React, { Component } from 'react';\nimport { Redirect} from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { setSpotifyToken } from '../../actions';\n\n\nclass SpotifyCallback extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { done: false };\n\t}\n\n\tcomponentDidMount() {\n\t\tconst hash = document.location.hash;\n\t\tconst hashData = hash.match(/#access_token=(.*)&token_type=Bearer&expires_in=(.*)/);\n\t\tconst accessToken = hashData[1];\n\t\tconst expiresIn = hashData[2];\n\t\tthis.props.setSpotifyToken(accessToken);\n\t\tthis.setState({ done: true });\n\t}\n\n\trender() {\n\t\tif(this.state.done) {\n\t\t\treturn <div>\n\t\t\t\t\t\t\t\tRedirecting after Spotify callback...\n\t\t\t\t\t\t\t\t<Redirect\n\t\t\t            to={{\n\t\t\t              pathname: \"/\",\n\t\t\t              state: { from: this.props.location }\n\t\t\t            }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>;\n\t\t}\n\t\telse {\n\t\t\treturn <div>Redirecting after Spotify callback...</div>\n\t\t}\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn bindActionCreators({ setSpotifyToken }, dispatch);\n}\n\nexport default connect(null, mapDispatchToProps)(SpotifyCallback);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { createBrowserHistory } from 'history';\n\nimport ReduxThrottle from 'redux-throttle';\nimport HashtagSearch from './middleware/HashtagSearchMiddleware';\nimport VideoSearch from './middleware/VideoSearchMiddleware';\nimport RefreshPlayback from './middleware/RefreshPlaybackMiddleware';\nimport ReduxPromise from 'redux-promise';\n\nimport './index.css';\n\nimport Reducers from './reducers';\nimport Timelapse from './components/Timelapse';\nimport SpotifyLogin from './components/SpotifyLogin';\nimport SpotifyCallback from './components/SpotifyCallback';\n\nimport * as serviceWorker from './serviceWorker';\n\nconst DEFAULT_THROTTLE_WAIT = 1000;\nconst DEFAULT_THROTTLE_OPTIONS = {\n\tleading: true,\n\ttrailing: true,\n};\n\nconst routing = (\n\t<Router basename={'/spotify'}>\n\t\t<div>\n\t\t\t<Route path={'/'} component={Timelapse} />\n\t\t\t<Route path={'/timelapse'} component={Timelapse} />\n\t\t\t<Route path={'/login'} component={SpotifyLogin} />\n\t\t\t<Route path={'/callback'} component={SpotifyCallback} />\n\t\t</div>\n\t</Router>\n);\n\nconst provider = (\n\t<Provider\n\t\tstore={\n\t\t\t\t\t\tapplyMiddleware(\n\t\t\t\t\t\t\tReduxThrottle(DEFAULT_THROTTLE_WAIT, DEFAULT_THROTTLE_OPTIONS),\n\t\t\t\t\t\t\tHashtagSearch,\n\t\t\t\t\t\t\tVideoSearch,\n\t\t\t\t\t\t\tRefreshPlayback,\n\t\t\t\t\t\t\tReduxPromise,\n\t\t\t\t\t\t)(createStore)(Reducers)\n\t\t\t\t\t}\n\t>\n\t\t{routing}\n\t</Provider>\n);\n\nReactDOM.render(provider, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}